<blockquote>
<p><strong>Clean Code</strong> 를 읽고 정리하는 문서이다.</p>
</blockquote>
<h1 id="함수를-깔끔하게-만드는-방법">함수를 깔끔하게 만드는 방법</h1>
<h2 id="1-더-작게-만들기">1. 더 작게 만들기</h2>
<p>함수가 길면 가독성이 떨어진다. 이를 해결하기 위해 다음 규칙을 지켜보자.</p>
<ul>
<li>함수를 밖으로 빼내어 중복된 코드를 줄이고, 중첩된 if 문을 없앤다.</li>
<li><code>if-else</code> 문, <code>while</code> 문 등에 들어가는 블록은 <strong>한 줄</strong>이어야 한다.</li>
<li>그 한 줄에서 함수를 호출하고, 이 때의 함수는 적절한 이름으로 짓는다.</li>
</ul>
<h2 id="2-한-가지-일만-하기">2. 한 가지 일만 하기</h2>
<h3 id="한-가지-일이-무엇인지-판단하는-기준">한 가지 일이 무엇인지 판단하는 기준?</h3>
<blockquote>
<p><strong>함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다.</strong></p>
</blockquote>
<p>지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행한다면, 그 함수는 한 가지 작업만 하는 것이다.
여전히 판단이 어렵다면 다음 기준으로 판단해보자.
지금의 함수가 단순히 다른 표현이 아니라 <strong>의미 있는 이름으로 다른 함수를 추출할 수 있다면</strong>, 해당 함수는 여러 작업을 하고 있으므로 더 쪼개져야 한다.</p>
<h2 id="3-함수당-추상화-수준은-하나만">3. 함수당 추상화 수준은 하나만</h2>
<h3 id="코드는-위에서-아래로-내려가며-읽는다">코드는 위에서 아래로 내려가며 읽는다</h3>
<p>한 함수 다음에는 추상화 수준이 한 단계 낮은 함수가 오도록 한다.</p>
<h3 id="switch-문은-다형적-객체를-생성할-때-단-한-번만-허용한다">switch 문은 다형적 객체를 생성할 때 단 한 번만 허용한다</h3>
<p><code>switch 문</code>은 기본적으로 여러 가지 일을 하고, 이는 <code>SRP(Single Responsibility Principle)</code>를 위반한다. 또한 <code>case</code> 가 추가되면 코드의 변경이 일어나기 때문에, <code>OCP(Opne Closed Principle)</code>도 위반한다.
이를 해결하기 위해, <a href="https://lordofkangs.tistory.com/278">추상 팩토리</a> 안에 상속 관계로 숨긴 후 다른 코드에 노출하지 않는다. (물론 이를 매번 지킬 수는 없다.)</p>
<h2 id="4-서술적인-이름-사용하기">4. 서술적인 이름 사용하기</h2>
<p>함수의 이름은 서술적으로 정하자. 길고 서술적인 이름이 짧고 어려운 이름보다, 또 길고 서술적인 주석보다 좋다.
또 이름을 붙일 때는 일관성을 두자. 모듈 내에서 함수의 이름은 같은 문구, 명사, 동사를 사용하도록 하자. 하나의 함수를 보았을 때 비슷한 기능을 하는 함수의 이름을 직관적으로 짐작할 수 있으면 된다.</p>
<h2 id="5-함수의-인수를-최소화하기">5. 함수의 인수를 최소화하기</h2>
<blockquote>
<p>함수에서 이상적인 인수는 0개(무항)다. 다음으로 1개(단항)고, 마지막이 2개(이항)다.
3개는 가능한 피하도록 하고, 4개 이상은 특별한 이유가 존재해야 한다.(있더라도 사용하지 않도록 한다.)</p>
</blockquote>
<h3 id="단항-형식-예시">단항 형식 예시</h3>
<p>함수에 인수 1개를 넘기는 흔한 이유는 다음과 같다.</p>
<ul>
<li>인수에 <strong>질문</strong>을 던지는 경우</li>
<li>인수를 뭔가로 <strong>변환</strong>해 결과를 반환하는 경우<ul>
<li>입력 인수를 변환하는 함수의 경우 출력 인수 대신 반환값을 사용하도록 한다.</li>
</ul>
</li>
<li><strong>이벤트</strong> 함수인 경우. 이 때는 입력 인수만 두고 출력 인수는 존재하지 않는다.</li>
</ul>
<h3 id="이항-형식-예시">이항 형식 예시</h3>
<p>함수에 인수가 2개가 있는 것이 올바른 경우는, 해당 인수 2개가 <strong>한 값을 표현</strong>하거나 <strong>자연적인 순서</strong>가 있는 경우이다. 예시는 다음과 같다.</p>
<pre><code class="language-java">Point p = new Point(0, 0);</code></pre>
<p>직교 좌표계의 점이 2개의 인수를 취하는 것은 한 값을 표현하기도 하고, 자연스러운 순서도 존재한다.
흔히 쓰는 이항 함수 중 잘못된 예시는 다음과 같다.</p>
<pre><code class="language-java">assertEquals(expected, actual);</code></pre>
<p>위의 함수는 사용하다가 <code>expected</code> 에 <code>actual</code> 을 집어넣기도 하는 등 자연스러운 순서가 없고, 인위적으로 순서를 기억해야 한다.
이러한 함수를 없앨 수는 없으나, 위험이 따른다는 사실을 인지하고 되도록 단항 함수로 바꾸도록 해야 한다.</p>
<h3 id="플래그-인수는-되도록-넣지-않는다">플래그 인수는 되도록 넣지 않는다.</h3>
<p><code>boolean</code> 인수를 넘기는 경우, 참일 때와 거짓일 때 처리하는 행위가 다르다는 것을 의미하고, 이는 한 가지 일만 한다는 원칙을 위반한다. 따라서 이러한 플래그 인수는 넣지 않도록 한다.</p>
<h3 id="인수를-줄이는-방법">인수를 줄이는 방법?</h3>
<p><strong>인수의 일부를 독자적인 클래스 변수로 선언한다.</strong></p>
<pre><code class="language-java">Circle makeCircle(double x, double y, double radius);
Circle makeCircle(Point center, double radius);</code></pre>
<p>위의 예제를 보면 객체를 생성해서 인수를 줄일 뿐만 아니라, <code>center</code> 라는 이름을 붙여서 개념을 표현하며 가독성까지 높였다.</p>
<h3 id="인수에-알맞는-이름을-짓는-방법">인수에 알맞는 이름을 짓는 방법?</h3>
<blockquote>
<p>이름은 함수의 의도와 인수의 순서 및 의도를 잘 표현하도록 지어야 한다.</p>
</blockquote>
<p>먼저 <strong>단항 함수</strong>의 경우 함수와 인수가 동사/명사 쌍을 이뤄야 한다. <code>write(name)</code> 이 그 예시이다. 이름을 쓴다는 의도가 잘 나타난다. 이보다 좋은 이름은 <code>writeField(name)</code>이다. 이는 이름이 필드라는 사실이 분명하게 드러난다.
다항 함수의 경우 함수 이름에 키워드, 즉 함수 인수를 추가할 수 있다. 예를 들어 <code>assertEquals(expected, actual)</code> 를 <code>assertExpectedEqualsActual(expected, actual)</code>로 변경하면 인수 순서를 인위적으로 기억할 필요가 없다.</p>
<h2 id="6-부수효과를-일으키지-않기">6. 부수효과를 일으키지 않기</h2>
<p><code>userName</code> 과 <code>password</code> 를 확인하여 두 인수가 올바르면 <code>true</code>, 아니면 <code>false</code> 를 반환하는 함수 <code>checkPassword(userName, password)</code>가 있다고 하자.
만약 이 함수를 만든 개발자가 세션을 초기화 하는 함수 <code>Session.initialize()</code>를 중간에 호출했을 때, 이를 모르는 다른 사용자는 함수의 이름만 보고 사용자를 인증하는 과정에서 의도치 않게 기존 세션 정보를 지울 수도 있다. 알고 있다 하더라도, 해당 함수는 특정 상황에서만 사용할 수 있게 된다.
그러니 꼭 세션을 초기화 해야 한다면 함수의 이름을 <code>checkPasswordAndInitializeSession</code>으로 바꾸고, 그게 아니라면 처음에 약속한 것만 하자. 그 외에 하는 것은 전부 부수효과이다.</p>
<h2 id="7-명령과-조회를-분리하기">7. 명령과 조회를 분리하기</h2>
<blockquote>
<p>함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다.</p>
</blockquote>
<h2 id="ect">Ect.</h2>
<h3 id="오류-코드보다는-예외를-사용한다">오류 코드보다는 예외를 사용한다</h3>
<p>try-catch 블록을 이용하고, 이 블록은 모양이 추하므로 밖으로 뽑아낸다.
즉 함수에서 예외를 throws 하여 호출한 곳으로 던지고, 블록 내부에서 함수를 호출한다.</p>
<h3 id="반복하지-않는다">반복하지 않는다.</h3>
<p>소프트웨어 개발에서 지금까지 일어난 혁신은 소스 코드에서 중복을 제거하려는 지속적인 노력으로 보인다.</p>
<h2 id="함수를-만드는-방법">함수를 만드는 방법</h2>
<p>글짓기의 초안-퇴고 작업과 비슷하다.
처음 함수를 작성할 때에는 위의 규칙들을 위반하며 길고 복잡할 수 밖에 없다. 일단 만들고 나서 다듬도록 하자.</p>
<hr />
<h3 id="참고-자료">참고 자료</h3>
<ul>
<li>클린 코드(로버트 C 마틴 저)</li>
</ul>